language: ruby
cache:
  bundler: true
  directories:
  - node_modules
  yarn: true
install:
- bundle install
- nvm install 9.11.1
- node -v
- npm i -g yarn
- yarn
jobs:
  include:
  - stage: test
    name: spec
    script: "./bin/ci.sh spec"
  - name: lint
    script: "./bin/ci.sh lint"
env:
  secure: DAfD3XdMtW+wrqCsnomb7mF4crD1l0FU7bLUxTSwG/if8WC38XHqVKHzvh5e5ychAjI7SfUlKrRNHrnobmjlp/p+terP7eiOPnuPN+HVTxmaEbGoT3HJWGoSgRI5idIOFI3jzWjUCBHy2DF8iFUZDBmnK6wPIe7GjZ9lBtUQwwqkP1kGj9zFdiIpvNB4R1lqqLvbH5MyDNd0+UHfUqT/d2O5aDA0G9Bb5oUNLWdDsw9Z82FbovihIWLAgICprszq6eYaKgHihJ6tMRoLXSzhoXFOtnpMj3acelKdwJjtxMqHq5cgrOXw7fvuDDe4Ze43cwUuaGCnKel6exGR2yufo/NlqqEnShcn+GGKp6PbS4SWBLVON6sHG9/D58ZmNBYPyREBRbPTkliOGVOhO2Y57z46twJyExHGx3IECYVMI2cLAAfkemyC+gr4MKvU22KY0hdvC3agX8a97YoOChs9UXCAfsNPceNUvGo6rRvkkccKkSbvJqryXYafwNy8+rJNdzd2fRBcf23kTXX0j/l7yGncOku97ifchaSuhmXDAzAwNRcV5jnPYeKUPqrla07YKkzykzti8GsCMem1FgkihucAYrLu7mWd63oUkwokCTuIDCptRbhWAj2zCHevmqMW+gEp2uTwcufXki57EAmd5cmoYYrPQBhFx7nbCNzmgJE=
branches:
  only:
  - master
  - staging
