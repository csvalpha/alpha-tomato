language: ruby
cache:
  bundler: true
  directories:
  - node_modules
  yarn: true
install:
- bundle install
- nvm install 9.11.1
- node -v
- npm i -g yarn
- yarn
jobs:
  include:
  - stage: test
    name: spec
    script: "./bin/ci.sh spec"
  - name: lint
    script: "./bin/ci.sh lint"
env:
  secure: BipSD7YXQ9S/lrwIwFqpqhPy9yUC5G8PzeHrxKviju0S/L4PhknNbcCFyAA+jshDj/1P+Vuy5d0I87zm9cf3D25xUUh/2W0hbRzzfFJGnKCOdhS/OWz5B7RHafogDe3J5ZND7dkdTjMfpZp5OkTKjmTvq9le1+qxmbtLwawx0F9Rf866IDU5c+eF5FbnjoMHeDZ8PBD+TTtd7IOJLlg+q31J6LeJEOMlUpvn3ft2BfFtOF/dbnwG8bbadjxiZ55sj10sNBMkm2W+x1uDENlWj59lJH/D8t0CrxEaGYGxfTdse0dGDVSXgfVZvPXFV5MtLDtHFG4M7dyzbHWI5PohsIK9ZE0yj4ZmNeC8pWa0EKsBAew9KL1eLcAlZOuOoSx0o9h57Oje/B9vSkShNvhUlY1pcOYaLlCROR9GxNQl24bPss1KM+Howg1mwXarSxXRee8wsK+8QMdr6qQUneZ3D44p/SRm/2Cb9JYL9Y5vOIaFiqZzu08V2q3X+OCrk6KeaPwvDJt+YtiY90RqW2lZ9wWeI02X2oJXkNrFsthF39E4+keXCHmMIhSCHM9Fg2JRW4LARHbOokWoNmnfCn+4bja6ji8LoI01EBCPcrDKw6/W61egNGr4oVk3FtXA7i6pAWi2UE5EX6PRlfKz/g2lgcgmZ+ZSZ6Po4nh6V/nZ70k=
branches:
  only:
  - master
  - staging
